context: {{ requiredEnv "KUBECONTEXT" }}

helmDefaults:
  tillerNamespace: kube-system  #dedicated default key for tiller-namespace
  wait: true
  recreatePods: false

environments:
  default:
    secrets:
      - helm_vars/secrets.yaml

releases:
- name: traefik
  namespace: traefik
  chart: stable/traefik
  version: ~1.52.6
  values:
    - "./traefik-values.yaml.gotmpl"
- name: matrix-synapse
  namespace: charts
  chart: ./charts/matrix-synapse/
  verify: false
  values:
    - matrix-synapse-values.yaml.gotmpl
- name: matrix-riot
  namespace: charts
  chart: ./charts/matrix-riot/
  verify: false
- name: mumble
  namespace: charts
  chart: ./charts/mumble/
  verify: false
- name: nextcloud
  namespace: nextcloud
  chart: ./charts/nextcloud
  verify: false
  recreatePods: true
